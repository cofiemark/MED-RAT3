<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Equipment RAT</title>
    <!-- Materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Google Icons (Material Symbols Outlined) -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Navbar -->
    <nav class="blue darken-2">
        <div class="nav-wrapper container">
            <a href="#!" class="brand-logo">Med-RATÂ®</a>
            <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                <li><a href="#dashboard-section" class="nav-link active"><i class="material-symbols-outlined left">dashboard</i>Dashboard</a></li>
                <li><a href="#equipment-section" class="nav-link"><i class="material-symbols-outlined left">precision_manufacturing</i>Equipment</a></li>
                <li><a href="#technicians-section" class="nav-link"><i class="material-symbols-outlined left">engineering</i>Technicians</a></li>
                <!-- Add logout simulation later if needed -->
            </ul>
        </div>
    </nav>

    <!-- Sidenav (Mobile Navigation) -->
    <ul class="sidenav" id="mobile-nav">
        <li><a href="#dashboard-section" class="nav-link active"><i class="material-symbols-outlined left">dashboard</i>Dashboard</a></li>
        <li><a href="#equipment-section" class="nav-link"><i class="material-symbols-outlined left">precision_manufacturing</i>Equipment</a></li>
        <li><a href="#technicians-section" class="nav-link"><i class="material-symbols-outlined left">engineering</i>Technicians</a></li>
    </ul>

    <!-- Main Content -->
    <main class="container">
        <!-- Loading Indicator -->
        <div id="loading-indicator" class="progress" style="display: none;">
            <div class="indeterminate"></div>
        </div>

        <!-- Dashboard Section -->
        <section id="dashboard-section" class="app-section">
            <h4><i class="material-symbols-outlined title-icon">dashboard</i>Dashboard</h4>
            <div class="row">
                <!-- Summary Cards -->
                <div class="col s12 m6 l3">
                    <div class="card blue-grey darken-1">
                        <div class="card-content white-text">
                            <span class="card-title"><i class="material-symbols-outlined small left">warning</i>Overdue</span>
                            <p id="overdue-count" class="dashboard-count">0</p>
                        </div>
                    </div>
                </div>
                <div class="col s12 m6 l3">
                    <div class="card orange darken-1">
                        <div class="card-content white-text">
                            <span class="card-title"><i class="material-symbols-outlined small left">build_circle</i>Needs Attention</span>
                            <p id="attention-count" class="dashboard-count">0</p>
                        </div>
                    </div>
                </div>
                 <div class="col s12 m6 l3">
                    <div class="card teal darken-1">
                        <div class="card-content white-text">
                            <span class="card-title"><i class="material-symbols-outlined small left">event_upcoming</i>Upcoming</span>
                            <p id="upcoming-count" class="dashboard-count">0</p>
                        </div>
                    </div>
                </div>
                <div class="col s12 m6 l3">
                    <div class="card green darken-1">
                        <div class="card-content white-text">
                            <span class="card-title"><i class="material-symbols-outlined small left">fact_check</i>Active Equip.</span>
                            <p id="active-equip-count" class="dashboard-count">0</p>
                        </div>
                    </div>
                </div>
            </div>
            <h5>High Priority Tasks</h5>
            <ul id="priority-tasks-list" class="collection">
                <!-- Tasks will be loaded here by JS -->
                <li class="collection-item">Loading tasks...</li>
            </ul>
        </section>

        <!-- Equipment Section -->
        <section id="equipment-section" class="app-section hide">
            <h4><i class="material-symbols-outlined title-icon">precision_manufacturing</i>Equipment List</h4>
            <div class="row filter-controls">
                <div class="input-field col s12 m4">
                    <i class="material-icons prefix">search</i>
                    <input type="text" id="equipment-search" placeholder="Search Name, Model, S/N...">
                    <label for="equipment-search">Search Equipment</label>
                </div>
                <div class="input-field col s12 m4">
                    <select id="equipment-filter-department">
                        <option value="" selected>All Departments</option>
                        <!-- Options loaded by JS -->
                    </select>
                    <label>Filter by Department</label>
                </div>
                <div class="input-field col s12 m4">
                    <select id="equipment-filter-status">
                        <option value="" selected>All Statuses</option>
                        <!-- Options loaded by JS -->
                    </select>
                    <label>Filter by Status</label>
                </div>
            </div>
            <a class="btn waves-effect waves-light modal-trigger blue darken-2" href="#modal-add-equipment">
                <i class="material-symbols-outlined left">add_circle_outline</i>Add Equipment
            </a>
            <table class="responsive-table striped highlight">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Model</th>
                        <th>Serial No.</th>
                        <th>Department</th>
                        <th>Status</th>
                        <th>Next Service</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="equipment-table-body">
                    <!-- Equipment rows will be loaded here by JS -->
                    <tr><td colspan="7" class="center-align">Loading equipment...</td></tr>
                </tbody>
            </table>
        </section>

        <!-- Technicians Section -->
        <section id="technicians-section" class="app-section hide">
            <h4><i class="material-symbols-outlined title-icon">engineering</i>Technicians</h4>
             <a class="btn waves-effect waves-light modal-trigger blue darken-2" href="#modal-add-technician">
                <i class="material-symbols-outlined left">person_add</i>Add Technician
            </a>
            <table class="striped highlight">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Qualifications</th>
                        <th>Status</th>
                        <!-- Add Actions column if needed -->
                    </tr>
                </thead>
                <tbody id="technicians-table-body">
                    <!-- Technician rows will be loaded here by JS -->
                     <tr><td colspan="5" class="center-align">Loading technicians...</td></tr>
                </tbody>
            </table>
        </section>
    </main>

    <!-- Modals -->

    <!-- Add Equipment Modal -->
    <div id="modal-add-equipment" class="modal modal-fixed-footer">
        <form id="form-add-equipment">
            <div class="modal-content">
                <h4>Add New Equipment</h4>
                <div class="row">
                    <div class="input-field col s12 m6">
                        <input id="add-equip-name" type="text" class="validate" required>
                        <label for="add-equip-name">Equipment Name</label>
                    </div>
                    <div class="input-field col s12 m6">
                        <input id="add-equip-model" type="text">
                        <label for="add-equip-model">Model</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12 m6">
                        <input id="add-equip-serial" type="text">
                        <label for="add-equip-serial">Serial Number</label>
                    </div>
                     <div class="input-field col s12 m6">
                        <input id="add-equip-inventory" type="text">
                        <label for="add-equip-inventory">Inventory Code</label>
                    </div>
                </div>
                 <div class="row">
                    <div class="input-field col s12 m6">
                        <input id="add-equip-department" type="text">
                        <label for="add-equip-department">Department</label>
                    </div>
                    <div class="input-field col s12 m6">
                        <input id="add-equip-location" type="text">
                        <label for="add-equip-location">Location</label>
                    </div>
                </div>
                 <div class="row">
                    <div class="input-field col s12 m6">
                        <input id="add-equip-manufacturer" type="text">
                        <label for="add-equip-manufacturer">Manufacturer</label>
                    </div>
                     <div class="input-field col s12 m6">
                        <select id="add-equip-status" required>
                            <option value="" disabled selected>Choose status</option>
                            <option value="Active">Active</option>
                            <option value="Needs Attention">Needs Attention</option>
                            <option value="Overdue">Overdue</option>
                            <option value="Under Repair">Under Repair</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                        <label>Status</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12 m6">
                        <input type="text" class="datepicker" id="add-equip-purchase-date">
                        <label for="add-equip-purchase-date">Purchase Date</label>
                    </div>
                    <div class="input-field col s12 m6">
                        <input type="text" class="datepicker" id="add-equip-install-date">
                        <label for="add-equip-install-date">Installation Date</label>
                    </div>
                </div>
                 <div class="row">
                     <div class="input-field col s12 m6">
                        <input type="text" class="datepicker" id="add-equip-last-service">
                        <label for="add-equip-last-service">Last Service Date</label>
                    </div>
                    <div class="input-field col s12 m6">
                        <input type="text" class="datepicker" id="add-equip-next-service">
                        <label for="add-equip-next-service">Next Service Date</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="modal-close waves-effect waves-green btn-flat"><i class="material-symbols-outlined left">cancel</i>Cancel</button>
                <button type="submit" class="btn waves-effect waves-light blue darken-2"><i class="material-symbols-outlined left">send</i>Submit</button>
            </div>
        </form>
    </div>

    <!-- Log Service Modal -->
    <div id="modal-log-service" class="modal modal-fixed-footer">
        <form id="form-log-service">
            <div class="modal-content">
                <h4>Log Service for <span id="log-service-equip-name">Equipment</span></h4>
                <input type="hidden" id="log-service-equip-id">
                <div class="row">
                    <div class="input-field col s12 m6">
                        <select id="log-service-type" required>
                            <option value="" disabled selected>Choose type</option>
                            <option value="PPM">Preventive Maintenance (PPM)</option>
                            <option value="Corrective">Corrective Maintenance</option>
                            <option value="Calibration">Calibration</option>
                            <option value="Inspection">Inspection</option>
                            <option value="Other">Other</option>
                        </select>
                        <label>Service Type</label>
                    </div>
                    <div class="input-field col s12 m6">
                        <input type="text" class="datepicker" id="log-service-date" required>
                        <label for="log-service-date">Service Date</label>
                    </div>
                </div>
                <div class="row">
                     <div class="input-field col s12 m6">
                        <select id="log-service-technician" required>
                            <option value="" disabled selected>Choose technician</option>
                            <!-- Technician options loaded by JS -->
                        </select>
                        <label>Technician</label>
                    </div>
                     <div class="input-field col s12 m6">
                        <input id="log-service-parts" type="text">
                        <label for="log-service-parts">Parts Used (comma-separated)</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <textarea id="log-service-work" class="materialize-textarea" required></textarea>
                        <label for="log-service-work">Work Performed</label>
                    </div>
                </div>
                 <div class="row">
                    <div class="input-field col s12">
                        <textarea id="log-service-notes" class="materialize-textarea"></textarea>
                        <label for="log-service-notes">Notes</label>
                    </div>
                </div>
                <!-- RPN Inputs -->
                <div class="row grey lighten-4 risk-section">
                    <h6 class="center-align">Risk Assessment</h6>
                     <div class="input-field col s12 m4">
                        <select id="log-service-likelihood" required>
                            <option value="" disabled selected>Select</option>
                            <option value="0">0 - Remote</option>
                            <option value="1">1 - Very Low</option>
                            <option value="2">2 - Low</option>
                            <option value="3">3 - Moderate</option>
                            <option value="4">4 - High</option>
                            <option value="5">5 - Very High</option>
                        </select>
                        <label>Likelihood (L)</label>
                    </div>
                     <div class="input-field col s12 m4">
                        <select id="log-service-severity" required>
                            <option value="" disabled selected>Select</option>
                            <option value="1">1 - Negligible</option>
                            <option value="2">2 - Minor</option>
                            <option value="3">3 - Moderate</option>
                            <option value="4">4 - Major</option>
                            <option value="5">5 - Catastrophic</option>
                        </select>
                        <label>Severity (S)</label>
                    </div>
                     <div class="input-field col s12 m4">
                        <select id="log-service-detectability" required>
                            <option value="" disabled selected>Select</option>
                            <option value="1">1 - Very High</option>
                            <option value="2">2 - High</option>
                            <option value="3">3 - Moderate</option>
                            <option value="4">4 - Low</option>
                        </select>
                        <label>Detectability (D)</label>
                    </div>
                    <div class="col s12 center-align risk-output">
                        <strong>RPN:</strong> <span id="log-service-rpn">N/A</span> |
                        <strong>Risk Level:</strong> <span id="log-service-risk-level">N/A</span> |
                        <strong>Action:</strong> <span id="log-service-action">N/A</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="modal-close waves-effect waves-green btn-flat"><i class="material-symbols-outlined left">cancel</i>Cancel</button>
                <button type="submit" class="btn waves-effect waves-light blue darken-2"><i class="material-symbols-outlined left">send</i>Submit Log</button>
            </div>
        </form>
    </div>

    <!-- Add Technician Modal -->
    <div id="modal-add-technician" class="modal">
        <form id="form-add-technician">
            <div class="modal-content">
                <h4>Add New Technician</h4>
                <div class="row">
                    <div class="input-field col s12 m6">
                        <input id="add-tech-name" type="text" class="validate" required>
                        <label for="add-tech-name">Technician Name</label>
                    </div>
                    <div class="input-field col s12 m6">
                        <input id="add-tech-email" type="email" class="validate">
                        <label for="add-tech-email">Email</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12 m6">
                        <input id="add-tech-phone" type="tel">
                        <label for="add-tech-phone">Phone</label>
                    </div>
                     <div class="input-field col s12 m6">
                        <select id="add-tech-status" required>
                            <option value="" disabled selected>Choose status</option>
                            <option value="Active">Active</option>
                            <option value="Inactive">Inactive</option>
                        </select>
                        <label>Status</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <textarea id="add-tech-qualifications" class="materialize-textarea"></textarea>
                        <label for="add-tech-qualifications">Qualifications</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                 <button type="button" class="modal-close waves-effect waves-green btn-flat"><i class="material-symbols-outlined left">cancel</i>Cancel</button>
                <button type="submit" class="btn waves-effect waves-light blue darken-2"><i class="material-symbols-outlined left">person_add</i>Add Technician</button>
            </div>
        </form>
    </div>

     <!-- View Equipment Details Modal -->
    <div id="modal-view-equipment" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4>Equipment Details</h4>
            <div id="view-equipment-content">
                <!-- Details loaded by JS -->
                Loading details...
            </div>
             <h5>Service History</h5>
             <ul id="view-equipment-logs" class="collection">
                 <!-- Service logs loaded by JS -->
                 <li class="collection-item">Loading service history...</li>
             </ul>
        </div>
        <div class="modal-footer">
            <button type="button" class="modal-close waves-effect waves-green btn-flat">Close</button>
        </div>
    </div>


    <!-- Materialize JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="script.js"></script>
</body>
</html>
